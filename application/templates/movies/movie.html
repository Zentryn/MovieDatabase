{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/movie_form.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/movie_item.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/movie.css') }}">

    <script src="{{ url_for('static', filename='scripts/movie_item_resize.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/movie_form.js') }}"></script>
{% endblock %}

{% block body %}
    <div class="title-container">
        <h2 id="page-title">Update Movie</h2>
    </div>
    
    <form method="POST" action="{{ url_for('update_movie') }}">
        {{ form.id }}
        {{ form.title }}
        {{ form.poster_url }}
        <br>
        <input id="submit-btn" type="submit" value="Update Movie" />
    </form>

    <form method="POST" action="{{ url_for('delete_movie') }}">
        {{ form.id }}
        <input id="delete-movie-btn" type="submit" value="Delete Movie" />
    </form>

    {% if form.title.errors %}
        <p id="error-list-title">Movie Title is invalid:</p>

        <ul id="error-list">
            {% endif %}
            {% for error in form.title.errors %}
                <li class="error-list-item">{{ error }}</li>
        </ul>
    {% endfor %}

    {% if form.poster_url.errors %}
        <p id="error-list-title">Poster URL is invalid:</p>

        <ul id="error-list">
            {% endif %}
            {% for error in form.poster_url.errors %}
                <li class="error-list-item">{{ error }}</li>
        </ul>
    {% endfor %}

    <p id="preview-text">
        Preview:
    </p>

    <div id="movie-preview-item" class="movie-item">
        <div id="movie-preview-item-cover" class="movie-item-cover" style="background-image: url('{{ form.poster_url.data }}')"></div>
        <div id="movie-preview-item-title" class="movie-item-title">{{ form.title.data }}</div>
    </div>
{% endblock %}